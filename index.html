<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Violet’s Health Tracker</title>
  <style>
    :root {
      --bg: #0f172a; --card: #111827; --text: #e5e7eb; --muted: #9ca3af; --accent: #60a5fa; --good: #34d399; --warn: #f59e0b;
    }
    body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; background: var(--bg); color: var(--text); }
    header { padding: 16px 20px; border-bottom: 1px solid #1f2937; display: flex; align-items: center; justify-content: space-between; }
    header h1 { font-size: 18px; margin: 0; }
    .container { padding: 16px; display: grid; gap: 16px; max-width: 1000px; margin: 0 auto; }
    .card { background: var(--card); border: 1px solid #1f2937; border-radius: 12px; padding: 16px; }
    .card h2 { margin: 0 0 12px; font-size: 16px; }
    .grid { display: grid; gap: 16px; }
    @media (min-width: 800px) { .grid-2 { grid-template-columns: 1fr 1fr; } .grid-3 { grid-template-columns: repeat(3, 1fr); } }
    table { width: 100%; border-collapse: collapse; font-size: 14px; }
    th, td { padding: 8px; border-bottom: 1px solid #1f2937; text-align: left; }
    th { color: var(--muted); font-weight: 600; }
    .pill { display: inline-block; padding: 4px 10px; border-radius: 999px; background: #1f2937; color: var(--muted); font-size: 12px; }
    .row { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
    input, select, button { background: #0b1220; color: var(--text); border: 1px solid #1f2937; border-radius: 8px; padding: 8px 10px; font-size: 14px; }
    button { cursor: pointer; }
    canvas { width: 100%; height: 160px; background: #0b1220; border-radius: 8px; }
    .stat { display: grid; gap: 4px; }
    .stat .label { color: var(--muted); font-size: 12px; }
    .stat .value { font-size: 18px; font-weight: 600; }
  </style>
</head>
<body>
  <header>
    <h1>Violet’s Health Tracker</h1>
    <div class="row">
      <span class="pill">5:00–5:40 AM workouts</span>
      <span class="pill">Gluten-light • Kidney-friendly</span>
    </div>
  </header>

  <main class="container">
    <section class="grid grid-2">
      <div class="card">
        <h2>Weight log</h2>
        <div class="row">
          <input id="date" type="date" />
          <input id="weight" type="number" step="0.1" placeholder="Weight (lb)" />
          <button onclick="addWeight()">Add</button>
        </div>
        <table id="weightTable">
          <thead><tr><th>Date</th><th>Weight</th><th>Δ vs prior</th><th>Notes</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>

      <div class="card">
        <h2>Weight trend</h2>
        <canvas id="chart"></canvas>
        <div class="grid grid-3" style="margin-top:12px;">
          <div class="stat"><div class="label">Current</div><div class="value" id="statCurrent">—</div></div>
          <div class="stat"><div class="label">7-day change</div><div class="value" id="statChange">—</div></div>
          <div class="stat"><div class="label">Entries</div><div class="value" id="statCount">0</div></div>
        </div>
      </div>
    </section>

    <section class="grid grid-2">
      <div class="card">
        <h2>Workout planner</h2>
        <table>
          <thead><tr><th>Day</th><th>Focus</th><th>Examples</th></tr></thead>
          <tbody>
            <tr><td>Mon</td><td>Cardio</td><td>Elliptical, brisk walk</td></tr>
            <tr><td>Tue</td><td>Strength</td><td>Weights, HIIT circuits</td></tr>
            <tr><td>Wed</td><td>Flexibility</td><td>Yoga, Pilates, stretching</td></tr>
            <tr><td>Thu</td><td>Cardio</td><td>Jump rope, elliptical</td></tr>
            <tr><td>Fri</td><td>Strength</td><td>Weights, HIIT circuits</td></tr>
            <tr><td>Sat</td><td>Active recovery</td><td>Dog walk, mobility</td></tr>
            <tr><td>Sun</td><td>Mixed long session</td><td>Cardio + yoga</td></tr>
          </tbody>
        </table>
      </div>

      <div class="card">
        <h2>Meals (daily notes)</h2>
        <div class="row">
          <input id="mealDate" type="date" />
          <select id="mealType">
            <option>Breakfast</option><option>Lunch</option><option>Dinner</option><option>Snacks</option>
          </select>
          <input id="mealNotes" placeholder="Macros/ingredients/notes" />
          <button onclick="addMeal()">Add</button>
        </div>
        <table id="mealTable">
          <thead><tr><th>Date</th><th>Type</th><th>Notes</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </main>

  <script>
    // Simple in-browser storage (persists across sessions on the same device)
    const store = {
      get: (key, fallback) => JSON.parse(localStorage.getItem(key) || JSON.stringify(fallback)),
      set: (key, value) => localStorage.setItem(key, JSON.stringify(value))
    };

    // Seed data (you can remove after first use)
    const seedWeights = [
      { date: '2025-12-07', weight: 225, notes: 'Starting point' },
      { date: '2025-12-14', weight: 223, notes: 'Solid week' }
    ];
    const seedMeals = [
      { date: '2025-12-07', type: 'Dinner', notes: 'Instant Pot chicken, veggies; gluten-light, kidney-friendly' }
    ];

    // Weight log
    function refreshWeightTable() {
      const data = store.get('weights', seedWeights);
      const tbody = document.querySelector('#weightTable tbody');
      tbody.innerHTML = '';
      for (let i = 0; i < data.length; i++) {
        const prev = i > 0 ? data[i].weight - data[i-1].weight : null;
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${data[i].date}</td>
          <td>${data[i].weight.toFixed(1)} lb</td>
          <td>${prev === null ? '—' : (prev > 0 ? '+' : '') + prev.toFixed(1)} lb</td>
          <td>${data[i].notes || ''}</td>
        `;
        tbody.appendChild(tr);
      }
      drawChart(data);
      updateStats(data);
      store.set('weights', data);
    }
    function addWeight() {
      const date = document.getElementById('date').value;
      const weight = parseFloat(document.getElementById('weight').value);
      if (!date || isNaN(weight)) return alert('Enter date and weight.');
      const data = store.get('weights', []);
      data.push({ date, weight, notes: '' });
      data.sort((a,b)=>a.date.localeCompare(b.date)); // keep chronological
      store.set('weights', data);
      document.getElementById('date').value = '';
      document.getElementById('weight').value = '';
      refreshWeightTable();
    }
    function updateStats(data) {
      const last = data[data.length-1];
      document.getElementById('statCurrent').textContent = last ? `${last.weight.toFixed(1)} lb` : '—';
      document.getElementById('statCount').textContent = data.length;
      if (data.length >= 2) {
        const change = last.weight - data[data.length-2].weight;
        document.getElementById('statChange').textContent = `${change > 0 ? '+' : ''}${change.toFixed(1)} lb`;
      } else {
        document.getElementById('statChange').textContent = '—';
      }
    }
    function drawChart(data) {
      const canvas = document.getElementById('chart');
      const ctx = canvas.getContext('2d');
      const width = canvas.width, height = canvas.height;
      ctx.clearRect(0,0,width,height);
      if (data.length < 2) return;
      // Normalize weights for plotting
      const weights = data.map(d=>d.weight);
      const min = Math.min(...weights), max = Math.max(...weights);
      const pad = (max-min) === 0 ? 1 : (max-min);
      // plot line
      ctx.strokeStyle = '#60a5fa'; ctx.lineWidth = 2; ctx.beginPath();
      for (let i=0;i<data.length;i++){
        const x = (i/(data.length-1)) * (width-20) + 10;
        const y = height - (((weights[i]-min)/pad) * (height-20) + 10);
        if (i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
      }
      ctx.stroke();
      // plot points
      ctx.fillStyle = '#34d399';
      for (let i=0;i<data.length;i++){
        const x = (i/(data.length-1)) * (width-20) + 10;
        const y = height - (((weights[i]-min)/pad) * (height-20) + 10);
        ctx.beginPath(); ctx.arc(x,y,3,0,Math.PI*2); ctx.fill();
      }
    }

    // Meals
    function refreshMeals() {
      const data = store.get('meals', seedMeals);
      const tbody = document.querySelector('#mealTable tbody');
      tbody.innerHTML = '';
      data.forEach(m=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${m.date}</td><td>${m.type}</td><td>${m.notes}</td>`;
        tbody.appendChild(tr);
      });
      store.set('meals', data);
    }
    function addMeal(){
      const date = document.getElementById('mealDate').value;
      const type = document.getElementById('mealType').value;
      const notes = document.getElementById('mealNotes').value;
      if (!date) return alert('Enter a date for the meal.');
      const data = store.get('meals', []);
      data.push({ date, type, notes });
      data.sort((a,b)=>a.date.localeCompare(b.date));
      store.set('meals', data);
      document.getElementById('mealDate').value='';
      document.getElementById('mealNotes').value='';
      refreshMeals();
    }

    // Init
    window.addEventListener('load', () => {
      // Only seed once
      if (!localStorage.getItem('seeded')) {
        store.set('weights', seedWeights);
        store.set('meals', seedMeals);
        localStorage.setItem('seeded','true');
      }
      refreshWeightTable();
      refreshMeals();
    });
  </script>
</body>
</html>
